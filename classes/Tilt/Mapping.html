<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>Tilt::Mapping</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='class' id='wrapper'>
<div class='header'>
<h1 class='name'><span class='type'>class</span>
Tilt::Mapping
</h1>
<ol class='paths'>
<li>
<a href="../../files/lib/tilt/mapping_rb.html">lib/tilt/mapping.rb</a>
</li>
</ol>
<div class='parent'>
Superclass:
<strong><a href="BaseMapping.html">BaseMapping</a></strong>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p><a href="Mapping.html"><code>Tilt::Mapping</code></a> associates file extensions with template implementations.</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span> = <span class="ruby-constant">Tilt</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register</span>(<span class="ruby-constant">Tilt</span><span class="ruby-operator">::</span><span class="ruby-constant">RDocTemplate</span>, <span class="ruby-string">&#39;rdoc&#39;</span>)
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.rdoc&#39;</span>] <span class="ruby-comment"># =&gt; Tilt::RDocTemplate</span>
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;index.rdoc&#39;</span>).<span class="ruby-identifier">render</span>
</pre>

<p>You can use {#register} to register a template class by file extension, {#registered?} to see if a file extension is mapped, {#[]} to lookup template classes, and {#new} to instantiate template objects.</p>

<p><a href="Mapping.html"><code>Mapping</code></a> also supports <strong>lazy</strong> template implementations. Note that regularly registered template implementations <strong>always</strong> have preference over lazily registered template implementations. You should use {#register} if you depend on a specific template implementation and {#register_lazy} if there are multiple alternatives.</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span> = <span class="ruby-constant">Tilt</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_lazy</span>(<span class="ruby-string">&#39;RDiscount::Template&#39;</span>, <span class="ruby-string">&#39;rdiscount/template&#39;</span>, <span class="ruby-string">&#39;md&#39;</span>)
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.md&#39;</span>]
<span class="ruby-comment"># =&gt; RDiscount::Template</span>
</pre>

<p>{#register_lazy} takes a class name, a filename, and a list of file extensions. When you try to lookup a template name that matches the file extension, <a href="../Tilt.html"><code>Tilt</code></a> will automatically try to require the filename and constantize the class name.</p>

<p>Unlike {#register}, there can be multiple template implementations registered lazily to the same file extension. <a href="../Tilt.html"><code>Tilt</code></a> will attempt to load the template implementations in order (registered <strong>last</strong> would be tried first), returning the first which doesnâ€™t raise LoadError.</p>

<p>If all of the registered template implementations fails, <a href="../Tilt.html"><code>Tilt</code></a> will raise the exception of the first, since that was the most preferred one.</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span> = <span class="ruby-constant">Tilt</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_lazy</span>(<span class="ruby-string">&#39;Kramdown::Template&#39;</span>, <span class="ruby-string">&#39;kramdown/template&#39;</span>, <span class="ruby-string">&#39;md&#39;</span>)
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_lazy</span>(<span class="ruby-string">&#39;RDiscount::Template&#39;</span>, <span class="ruby-string">&#39;rdiscount/template&#39;</span>, <span class="ruby-string">&#39;md&#39;</span>)
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.md&#39;</span>]
<span class="ruby-comment"># =&gt; RDiscount::Template</span>
</pre>

<p>In the previous example we say that RDiscount has a *higher priority* than Kramdown. <a href="../Tilt.html"><code>Tilt</code></a> will first try to <code>require &quot;rdiscount/template&quot;</code>, falling back to <code>require &quot;kramdown/template&quot;</code>. If none of these are successful, the first error will be raised.</p>
</div>
<div id='method-list'>
<h2>Methods</h2>
<h3>Public Class</h3>
<ol>
<li><a href="#method-c-new">new</a></li>
</ol>
<h3>Public Instance</h3>
<ol>
<li><a href="#method-i-extensions_for">extensions_for</a></li>
<li><a href="#method-i-finalized">finalized</a></li>
<li><a href="#method-i-initialize_copy">initialize_copy</a></li>
<li><a href="#attribute-i-lazy_map">lazy_map</a></li>
<li><a href="#method-i-register">register</a></li>
<li><a href="#method-i-register_lazy">register_lazy</a></li>
<li><a href="#method-i-register_pipeline">register_pipeline</a></li>
<li><a href="#method-i-registered-3F">registered?</a></li>
<li><a href="#attribute-i-template_map">template_map</a></li>
<li><a href="#method-i-unregister">unregister</a></li>
</ol>
</div>
<div id='context'>
</div>
<div id='section'>
<div id='constants-list'>
<h2>Constants</h2>
<div class='name-list'>
<table summary='Constants'>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>LOCK</td>
<td>=</td>
<td class='context-item-value'>Mutex.new</td>
<td>&nbsp;</td>
<td class='context-item-desc'></td>
</tr>
</table>
</div>
</div>
<div id='attribute-list'>
<h2 class='section-bar'>Attributes</h2>
<div class='name-list'>
<table>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>
<a name='attribute-i-lazy_map'>lazy_map</a>
</td>
<td class='context-item-value'>[R]</td>
<td class='context-item-desc'>
<p>@private</p>
</td>
</tr>
<tr class='top-aligned-row context-row'>
<td class='context-item-name'>
<a name='attribute-i-template_map'>template_map</a>
</td>
<td class='context-item-value'>[R]</td>
<td class='context-item-desc'>
<p>@private</p>
</td>
</tr>
</table>
</div>
</div>
<div id='methods'>
<h2>Public Class methods</h2>
<div class='method public-class' id='method-method-c-new'>
<a name='method-c-new'></a>
<div class='synopsis'>
<span class='name'>new</span><span class='arguments'>()</span>

</div>
<div class='description'>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-c-new-source&#39;); return false'>
[show source]
</a>
<pre id='method-c-new-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">131</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>
<span class="line-num">132</span>   <span class="ruby-ivar">@template_map</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
<span class="line-num">133</span>   <span class="ruby-ivar">@lazy_map</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>, <span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">h</span>[<span class="ruby-identifier">k</span>] = [] }
<span class="line-num">134</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<h2>Public Instance methods</h2>
<div class='method public-instance' id='method-method-i-extensions_for'>
<a name='method-i-extensions_for'></a>
<div class='synopsis'>
<span class='name'>extensions_for</span><span class='arguments'>(template_class)</span>

</div>
<div class='description'>

<p>Finds the extensions the template class has been registered under. @param [template class] template_class</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-extensions_for-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-extensions_for-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">287</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">extensions_for</span>(<span class="ruby-identifier">template_class</span>)
<span class="line-num">288</span>   <span class="ruby-identifier">res</span> = []
<span class="line-num">289</span>   <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-ivar">@template_map</span>.<span class="ruby-identifier">to_a</span>}.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span>, <span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
<span class="line-num">290</span>     <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ext</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">template_class</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">klass</span>
<span class="line-num">291</span>   <span class="ruby-keyword">end</span>
<span class="line-num">292</span>   <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-ivar">@lazy_map</span>.<span class="ruby-identifier">to_a</span>}.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span>, <span class="ruby-identifier">choices</span><span class="ruby-operator">|</span>
<span class="line-num">293</span>     <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ext</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-identifier">choices</span>.<span class="ruby-identifier">dup</span>}.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span>, <span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">template_class</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">klass</span> }
<span class="line-num">294</span>   <span class="ruby-keyword">end</span>
<span class="line-num">295</span>   <span class="ruby-identifier">res</span>.<span class="ruby-identifier">uniq!</span>
<span class="line-num">296</span>   <span class="ruby-identifier">res</span>
<span class="line-num">297</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-finalized'>
<a name='method-i-finalized'></a>
<div class='synopsis'>
<span class='name'>finalized</span><span class='arguments'>()</span>

</div>
<div class='description'>

<p>Return a finalized mapping. A finalized mapping will only include support for template libraries already loaded, and will not allow registering new template libraries or lazy loading template libraries not yet loaded. Finalized mappings improve performance by not requiring synchronization and ensure that the mapping will not attempt to load additional files (useful when restricting file system access after template libraries in use are loaded).</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-finalized-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-finalized-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">151</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">finalized</span>
<span class="line-num">152</span>   <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-ivar">@lazy_map</span>.<span class="ruby-identifier">dup</span>}.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">classes</span><span class="ruby-operator">|</span>
<span class="line-num">153</span>     <span class="ruby-identifier">register_defined_classes</span>(<span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-identifier">classes</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:first</span>)}, <span class="ruby-identifier">pattern</span>)
<span class="line-num">154</span>   <span class="ruby-keyword">end</span>
<span class="line-num">155</span> 
<span class="line-num">156</span>   <span class="ruby-comment"># Check if a template class is already present</span>
<span class="line-num">157</span>   <span class="ruby-constant">FinalizedMapping</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-ivar">@template_map</span>.<span class="ruby-identifier">dup</span>}.<span class="ruby-identifier">freeze</span>)
<span class="line-num">158</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-initialize_copy'>
<a name='method-i-initialize_copy'></a>
<div class='synopsis'>
<span class='name'>initialize_copy</span><span class='arguments'>(other)</span>

</div>
<div class='description'>

<p>@private</p>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-initialize_copy-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-initialize_copy-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">137</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize_copy</span>(<span class="ruby-identifier">other</span>)
<span class="line-num">138</span>   <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
<span class="line-num">139</span>     <span class="ruby-ivar">@template_map</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">template_map</span>.<span class="ruby-identifier">dup</span>
<span class="line-num">140</span>     <span class="ruby-ivar">@lazy_map</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">lazy_map</span>.<span class="ruby-identifier">dup</span>
<span class="line-num">141</span>   <span class="ruby-keyword">end</span>
<span class="line-num">142</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-register'>
<a name='method-i-register'></a>
<div class='synopsis'>
<span class='name'>register</span><span class='arguments'>(template_class, *extensions)</span>

</div>
<div class='description'>

<p>Registers a template implementation by file extension. There can only be one template implementation per file extension, and this method will override any existing mapping.</p>

<p>@param template_class @param extensions [Array&lt;String&gt;] List of extensions. @return [void]</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register</span> <span class="ruby-constant">MyEngine</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>, <span class="ruby-string">&#39;mt&#39;</span>
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.mt&#39;</span>] <span class="ruby-comment"># =&gt; MyEngine::Template</span>
</pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-register-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-register-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">200</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">register</span>(<span class="ruby-identifier">template_class</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">extensions</span>)
<span class="line-num">201</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">template_class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_str</span>)
<span class="line-num">202</span>     <span class="ruby-comment"># Support register(ext, template_class) too</span>
<span class="line-num">203</span>     <span class="ruby-identifier">extensions</span>, <span class="ruby-identifier">template_class</span> = [<span class="ruby-identifier">template_class</span>], <span class="ruby-identifier">extensions</span>[<span class="ruby-value">0</span>]
<span class="line-num">204</span>   <span class="ruby-keyword">end</span>
<span class="line-num">205</span> 
<span class="line-num">206</span>   <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
<span class="line-num">207</span>     <span class="ruby-identifier">ext</span> = <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">to_s</span>
<span class="line-num">208</span>     <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
<span class="line-num">209</span>       <span class="ruby-ivar">@template_map</span>[<span class="ruby-identifier">ext</span>] = <span class="ruby-identifier">template_class</span>
<span class="line-num">210</span>     <span class="ruby-keyword">end</span>
<span class="line-num">211</span>   <span class="ruby-keyword">end</span>
<span class="line-num">212</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-register_lazy'>
<a name='method-i-register_lazy'></a>
<div class='synopsis'>
<span class='name'>register_lazy</span><span class='arguments'>(class_name, file, *extensions)</span>

</div>
<div class='description'>

<p>Registers a lazy template implementation by file extension. You can have multiple lazy template implementations defined on the same file extension, in which case the template implementation defined <strong>last</strong> will be attempted loaded <strong>first</strong>.</p>

<p>@param class_name [String] Class name of a template class. @param file [String] Filename where the template class is defined. @param extensions [Array&lt;String&gt;] List of extensions. @return [void]</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_lazy</span> <span class="ruby-string">&#39;MyEngine::Template&#39;</span>, <span class="ruby-string">&#39;my_engine/template&#39;</span>,  <span class="ruby-string">&#39;mt&#39;</span>

<span class="ruby-keyword">defined?</span>(<span class="ruby-constant">MyEngine</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>) <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.mt&#39;</span>] <span class="ruby-comment"># =&gt; MyEngine::Template</span>
<span class="ruby-keyword">defined?</span>(<span class="ruby-constant">MyEngine</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>) <span class="ruby-comment"># =&gt; true</span>
</pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-register_lazy-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-register_lazy-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">176</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">register_lazy</span>(<span class="ruby-identifier">class_name</span>, <span class="ruby-identifier">file</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">extensions</span>)
<span class="line-num">177</span>   <span class="ruby-comment"># Internal API</span>
<span class="line-num">178</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">class_name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
<span class="line-num">179</span>     <span class="ruby-constant">Tilt</span>.<span class="ruby-identifier">autoload</span> <span class="ruby-identifier">class_name</span>, <span class="ruby-identifier">file</span>
<span class="line-num">180</span>     <span class="ruby-identifier">class_name</span> = <span class="ruby-node">&quot;Tilt::#{class_name}&quot;</span>
<span class="line-num">181</span>   <span class="ruby-keyword">end</span>
<span class="line-num">182</span> 
<span class="line-num">183</span>   <span class="ruby-identifier">v</span> = [<span class="ruby-identifier">class_name</span>, <span class="ruby-identifier">file</span>].<span class="ruby-identifier">freeze</span>
<span class="line-num">184</span>   <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
<span class="line-num">185</span>     <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-ivar">@lazy_map</span>[<span class="ruby-identifier">ext</span>].<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">v</span>)}
<span class="line-num">186</span>   <span class="ruby-keyword">end</span>
<span class="line-num">187</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-register_pipeline'>
<a name='method-i-register_pipeline'></a>
<div class='synopsis'>
<span class='name'>register_pipeline</span><span class='arguments'>(ext, options=EMPTY_HASH)</span>

</div>
<div class='description'>

<p>Register a new template class using the given extension that represents a pipeline of multiple existing template, where the output from the previous template is used as input to the next template.</p>

<p>This will register a template class that processes the input with the <strong>erb</strong> template processor, and takes the output of that and feeds it to the <strong>scss</strong> template processor, returning the output of the <strong>scss</strong> template processor as the result of the pipeline.</p>

<p>@param ext [String] Primary extension to register @option :templates [Array&lt;String&gt;] Extensions of templates</p>

<pre>to execute in order (defaults to the ext.split(&#39;.&#39;).reverse)</pre>

<p>@option :extra_exts [Array&lt;String&gt;] Additional extensions to register @option String [Hash] Options hash for individual template in the</p>

<pre>pipeline (key is extension).</pre>

<p>@return [void]</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_pipeline</span>(<span class="ruby-string">&#39;scss.erb&#39;</span>)
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_pipeline</span>(<span class="ruby-string">&#39;scss.erb&#39;</span>, <span class="ruby-string">&#39;erb&#39;</span><span class="ruby-operator">=&gt;</span>{<span class="ruby-value">:outvar</span><span class="ruby-operator">=&gt;</span><span class="ruby-string">&#39;@foo&#39;</span>})
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register_pipeline</span>(<span class="ruby-string">&#39;scsserb&#39;</span>, <span class="ruby-value">:extra_exts</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;scss.erb&#39;</span>,
                          <span class="ruby-value">:templates</span><span class="ruby-operator">=&gt;</span>[<span class="ruby-string">&#39;erb&#39;</span>, <span class="ruby-string">&#39;scss&#39;</span>])
</pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-register_pipeline-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-register_pipeline-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">238</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">register_pipeline</span>(<span class="ruby-identifier">ext</span>, <span class="ruby-identifier">options</span>=<span class="ruby-constant">EMPTY_HASH</span>)
<span class="line-num">239</span>   <span class="ruby-identifier">templates</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:templates</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;.&#39;</span>).<span class="ruby-identifier">reverse</span>
<span class="line-num">240</span>   <span class="ruby-identifier">templates</span> = <span class="ruby-identifier">templates</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> [<span class="ruby-keyword">self</span>[<span class="ruby-identifier">t</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">t</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">EMPTY_HASH</span>]}
<span class="line-num">241</span> 
<span class="line-num">242</span>   <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Pipeline</span>)
<span class="line-num">243</span>   <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:const_set</span>, <span class="ruby-value">:TEMPLATES</span>, <span class="ruby-identifier">templates</span>)
<span class="line-num">244</span> 
<span class="line-num">245</span>   <span class="ruby-identifier">register</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">ext</span>, <span class="ruby-operator">*</span><span class="ruby-constant">Array</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:extra_exts</span>]))
<span class="line-num">246</span>   <span class="ruby-identifier">klass</span>
<span class="line-num">247</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-registered-3F'>
<a name='method-i-registered-3F'></a>
<div class='synopsis'>
<span class='name'>registered?</span><span class='arguments'>(ext)</span>

</div>
<div class='description'>

<p>Checks if a file extension is registered (either eagerly or lazily) in this mapping.</p>

<p>@param ext [String] File extension.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">registered?</span>(<span class="ruby-string">&#39;erb&#39;</span>)  <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">registered?</span>(<span class="ruby-string">&#39;nope&#39;</span>) <span class="ruby-comment"># =&gt; false</span>
</pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-registered-3F-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-registered-3F-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">280</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">registered?</span>(<span class="ruby-identifier">ext</span>)
<span class="line-num">281</span>   <span class="ruby-identifier">ext_downcase</span> = <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">downcase</span>
<span class="line-num">282</span>   <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span>{<span class="ruby-ivar">@template_map</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">ext_downcase</span>)} <span class="ruby-keyword">or</span> <span class="ruby-identifier">lazy?</span>(<span class="ruby-identifier">ext</span>)
<span class="line-num">283</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
<div class='method public-instance' id='method-method-i-unregister'>
<a name='method-i-unregister'></a>
<div class='synopsis'>
<span class='name'>unregister</span><span class='arguments'>(*extensions)</span>

</div>
<div class='description'>

<p>Unregisters an extension. This removes the both normal registrations and lazy registrations.</p>

<p>@param extensions [Array&lt;String&gt;] List of extensions. @return nil</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">register</span> <span class="ruby-constant">MyEngine</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>, <span class="ruby-string">&#39;mt&#39;</span>
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.mt&#39;</span>] <span class="ruby-comment"># =&gt; MyEngine::Template</span>
<span class="ruby-identifier">mapping</span>.<span class="ruby-identifier">unregister</span>(<span class="ruby-string">&#39;mt&#39;</span>)
<span class="ruby-identifier">mapping</span>[<span class="ruby-string">&#39;index.mt&#39;</span>] <span class="ruby-comment"># =&gt; nil</span>
</pre>

</div>
<div class='source'>
<a class='source-toggle' href='#' onclick='toggleCode(&#39;method-i-unregister-source&#39;); return false'>
[show source]
</a>
<pre id='method-i-unregister-source'>    <span class="ruby-comment"># File lib/tilt/mapping.rb</span>
<span class="line-num">260</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unregister</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">extensions</span>)
<span class="line-num">261</span>   <span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
<span class="line-num">262</span>     <span class="ruby-identifier">ext</span> = <span class="ruby-identifier">ext</span>.<span class="ruby-identifier">to_s</span>
<span class="line-num">263</span>     <span class="ruby-constant">LOCK</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
<span class="line-num">264</span>       <span class="ruby-ivar">@template_map</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">ext</span>)
<span class="line-num">265</span>       <span class="ruby-ivar">@lazy_map</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">ext</span>)
<span class="line-num">266</span>     <span class="ruby-keyword">end</span>
<span class="line-num">267</span>   <span class="ruby-keyword">end</span>
<span class="line-num">268</span> 
<span class="line-num">269</span>   <span class="ruby-keyword">nil</span>
<span class="line-num">270</span> <span class="ruby-keyword">end</span></pre>
</div>
</div>
</div>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
